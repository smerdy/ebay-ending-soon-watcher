"use strict";function convertMS(e){var r,o,a,i;return i=Math.floor(e/1e3),a=Math.floor(i/60),i%=60,o=Math.floor(a/60),a%=60,r=Math.floor(o/24),o%=24,{d:r,h:o,m:a,s:i}}var trim=require("trim"),ebay=require("ebay-api"),request=require("request"),cheerio=require("cheerio"),fs=require("fs"),ebayConfig=JSON.parse(fs.readFileSync("src/config.json")).ebay;module.exports=function(e,r,o){var a={keywords:e.name.split(" "),paginationInput:{entriesPerPage:10},itemFilter:[{name:"MaxPrice",value:"900"}],sortOrder:"EndingTimeSoonest"};ebay.xmlRequest({serviceName:"Finding",opType:"findItemsByKeywords",devId:ebayConfig.devId,certId:ebayConfig.certId,appId:ebayConfig.appId,authToken:ebayConfig.authToken,params:a,parser:ebay.parseResponseJson},function(e,r){if(e)throw e;var o=r.searchResult.item;console.log("Found",o.length,"items");for(var a=0;a<o.length;a++)console.log("- "+o[a].title)})};
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}var _mailer=require("./../src/mailer"),_mailer2=_interopRequireDefault(_mailer),_ebayFetch=require("./../src/ebayFetch"),_ebayFetch2=_interopRequireDefault(_ebayFetch),CronJob=require("cron").CronJob,hour_gap=6,ebayOptions={name:"fujifilm x-t1",price_low:300,price_high:400},job=new CronJob("0-59/10 * * * * *",function(){(0,_ebayFetch2["default"])(ebayOptions,hour_gap,function(e){if(e.length>0){var r=e.map(function(e){return'<a href="'+e.itemListingUrl+'">'+e.title+'</a><img src="'+e.itemPictureUrl+'"><p>'+e.price+"</p><p>"+e.endsAt+"</p>"}).join("<br>"),i={htmlBody:r,subject:ebayOptions.name};(0,_mailer2["default"])(i)}else{var i={htmlBody:"No items found!",subject:ebayOptions.name};(0,_mailer2["default"])(i)}})},function(){},(!0),"America/Los_Angeles");
"use strict";var fs=require("fs"),nodemailer=require("nodemailer"),config=JSON.parse(fs.readFileSync("src/config.json"));module.exports=function(e){var r=nodemailer.createTransport({service:"gmail",secure:!1,port:25,auth:{user:config.email,pass:config.password},tls:{rejectUnauthorized:!1}}),o={from:config.email,to:config.email,subject:e.subject,html:e.htmlBody};r.sendMail(o,function(e,r){e&&console.log("Error occurred. "+e),console.log("Message sent: %s",r)})};