"use strict";var trim=require("trim"),request=require("request"),cheerio=require("cheerio"),NUM_HOURS=72,TODAY=new Date;module.exports=function(e,t){var r="http://www.ebay.com/sch/i.html?_from=R40&_sacat=0&_nkw="+e.name+"&_sop=1&_udlo="+e.price_low+"&_udhi="+e.price_high+"&LH_ItemCondition=1000|1500|3000&_ipg=200&rt=nc";console.log(r),request(r,function(e,r,i){if(200===r.statusCode){var n=cheerio.load(i),a=Array.from(n(".sresult")).filter(function(e){var t=parseInt(n(e).find(".timeleft .timeMs").attr("timems"));if(t){var r=new Date;if(r.setTime(t),r-TODAY<=36e5*NUM_HOURS)return!0}return!1}).map(function(e){var t=new Date;return t.setTime(parseInt(n(e).find(".timeleft .timeMs").attr("timems"))),{title:trim(n(e).find("h3.lvtitle").text()),price:parseFloat(trim(n(e).find(".lvprice").text()).replace(",","").replace("$","")),endsAt:t.toString(),itemListingUrl:n(e).find(".lvtitle a").attr("href"),itemPictureUrl:n(e).find(".lvpic img").attr("src")}});t(a)}})};
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}var _mailer=require("./../src/mailer"),_mailer2=_interopRequireDefault(_mailer),_ebayFetch=require("./../src/ebayFetch"),_ebayFetch2=_interopRequireDefault(_ebayFetch),CronJob=require("cron").CronJob,ebayOptions={name:"fujifilm+x-t1",price_low:400,price_high:1e3},job=new CronJob("00 11 04 * * 1-7",function(){(0,_ebayFetch2["default"])(ebayOptions,function(e){var r=e.map(function(e){return"<p>"+e.endsAt+"</p>"}).join(),i={HTMLbody:r,subject:ebayOptions.name};(0,_mailer2["default"])(i)})},function(){},(!0),"America/Los_Angeles");
"use strict";var fs=require("fs"),nodemailer=require("nodemailer"),config=JSON.parse(fs.readFileSync("src/config.json"));module.exports=function(e){var r=nodemailer.createTransport({service:"gmail",secure:!1,port:25,auth:{user:config.email,pass:config.password},tls:{rejectUnauthorized:!1}}),o={from:config.email,to:config.email,subject:e.subject,html:e.HTMLbody};r.sendMail(o,function(e,r){e&&console.log("Error occurred. "+e),console.log("Message sent: %s",r)})};